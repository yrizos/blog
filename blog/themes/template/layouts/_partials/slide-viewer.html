{{- $slidesDir := .Params.slides_dir -}}
{{- if $slidesDir -}}
{{- $slidePattern := printf "images/%s/slide-*.png" $slidesDir -}}
{{- $slides := resources.Match $slidePattern -}}
{{- $slides = sort $slides "Name" -}}
{{- $slideCount := len $slides -}}
{{- if gt $slideCount 0 -}}
<div class="slide-viewer" data-slides-dir="{{ $slidesDir }}" data-slide-count="{{ $slideCount }}">
  <div class="slide-viewer-picture">
    <div class="glide">
      <div class="glide__track" data-glide-el="track">
        <ul class="glide__slides">
          {{- range $index, $slide := $slides -}}
          <li class="glide__slide">
            <img 
              src="{{ $slide.RelPermalink }}" 
              alt=""
              aria-hidden="true"
              loading="lazy"
              class="slide-image">
          </li>
          {{- end -}}
        </ul>
      </div>
    </div>
  </div>
  <div class="slide-viewer-controls">
    <button class="slide-viewer-arrow slide-viewer-arrow--left" aria-label="Previous slide">â†</button>
    <div class="slide-viewer-bullets">
      {{- range $index := (seq 0 (sub $slideCount 1)) -}}
      <button class="slide-viewer-bullet" aria-label="Go to slide {{ add $index 1 }}"></button>
      {{- end -}}
    </div>
    <button class="slide-viewer-arrow slide-viewer-arrow--right" aria-label="Next slide">â†’</button>
  </div>
</div>
{{- end -}}
{{- end -}}

